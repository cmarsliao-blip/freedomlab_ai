<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ä¸æƒ³ä¸Šç­å¯¦é©—å®¤</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <style>
        .loader { border: 4px solid #f3f3f3; border-radius: 50%; border-top: 4px solid #4f46e5; width: 30px; height: 30px; animation: spin 1s linear infinite; margin: 0 auto; }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
    </style>
</head>
<body class="bg-indigo-50 min-h-screen flex items-center justify-center p-4">

<div class="bg-white w-full max-w-2xl rounded-2xl shadow-xl overflow-hidden">
    <div class="bg-indigo-600 p-8 text-center">
        <h1 class="text-3xl font-extrabold text-white tracking-wide">ä¸æƒ³ä¸Šç­å¯¦é©—å®¤ ğŸ§ª</h1>
        <p class="text-indigo-200 mt-2 text-lg">è¼¸å…¥ä½ çš„è·æ¥­ï¼ŒAI å¹«ä½ æŠŠæŠ€èƒ½è®Šç¾ï¼</p>
    </div>

    <div class="p-8 space-y-6">
        <div>
            <label class="block text-lg font-bold text-gray-800 mb-2">ä½ ç›®å‰çš„è·æ¥­æˆ–å°ˆé•·æ˜¯ï¼Ÿ</label>
            <input type="text" id="userJob" placeholder="ä¾‹å¦‚ï¼šç¾ç”²å¸«ã€è¡Œæ”¿äººå“¡ã€å‰ä»–è€å¸«..." 
                class="w-full p-4 border border-gray-300 rounded-lg text-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 shadow-sm">
        </div>

        <button onclick="generateIdeas()" id="generateBtn" 
            class="w-full bg-indigo-600 hover:bg-indigo-700 text-white text-xl font-bold py-4 rounded-lg shadow-lg transition duration-300 transform hover:-translate-y-1">
            ğŸ”® å¹«æˆ‘ç”Ÿæˆè®Šç¾é»å­
        </button>

        <div id="loadingArea" class="hidden text-center py-6">
            <div class="loader"></div>
            <p class="text-gray-500 mt-3 animate-pulse">æ­£åœ¨åˆ†æå¸‚å ´ç—›é»èˆ‡ç”¢å“æ¶æ§‹...</p>
        </div>

        <div id="resultArea" class="hidden mt-8 border-t-2 border-gray-100 pt-6">
            <div id="aiOutput" class="prose max-w-none text-gray-700 leading-relaxed bg-gray-50 p-6 rounded-xl border border-gray-200"></div>
        </div>
    </div>
    <div class="bg-gray-50 text-center py-4 text-xs text-gray-400">Powered by Gemini AI</div>
</div>

<script>
    async function generateIdeas() {
        const jobInput = document.getElementById('userJob');
        const resultArea = document.getElementById('resultArea');
        const aiOutput = document.getElementById('aiOutput');
        const loadingArea = document.getElementById('loadingArea');
        const btn = document.getElementById('generateBtn');
        const job = jobInput.value.trim();

        if (!job) { alert("âš ï¸ è«‹è¼¸å…¥è·æ¥­"); return; }

        loadingArea.classList.remove('hidden');
        resultArea.classList.add('hidden');
        btn.disabled = true;
        btn.classList.add('opacity-50', 'cursor-not-allowed');

        try {
            // å‘¼å«æˆ‘å€‘è‡ªå·±çš„å¾Œç«¯ API
            const response = await fetch('/api/generate', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ job: job })
            });
            const data = await response.json();
            if (!response.ok) throw new Error(data.error || "ç™¼ç”ŸéŒ¯èª¤");
            
            aiOutput.innerHTML = marked.parse(data.result);
            resultArea.classList.remove('hidden');
        } catch (error) {
            alert("éŒ¯èª¤ï¼š" + error.message);
        } finally {
            loadingArea.classList.add('hidden');
            btn.disabled = false;
            btn.classList.remove('opacity-50', 'cursor-not-allowed');
        }
    }
</script>
</body>
</html>